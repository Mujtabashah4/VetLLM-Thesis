%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% MS Thesis - Main Latex file
%
%
%
% Prepared by <Zubair Khalid>
% Version: Dec 2019
% Department of Electrical Engineering
% Lahore University of Management Sciences
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newcommand{\mycomments}{commentss}

\documentclass[a4paper,12pt]{report}
% Use the following if you want to print the thesis on two sides of the paper
%\documentclass[a4paper,openright,twoside,12pt]{report}

\usepackage{fancyhdr,setspace,geometry,ifthen}
\usepackage[verbose]{cite}
\usepackage[tbtags]{amsmath}
\usepackage[amsmath,thmmarks]{ntheorem}
\usepackage{graphicx,psfrag,epsfig}
\usepackage{amssymb}
\usepackage{array}
\usepackage{hhline}
\allowdisplaybreaks[1]
\usepackage{epic}
\usepackage{eepic}
\usepackage{enumerate}
\usepackage{color}
\usepackage{comment}
\usepackage{index}\makeindex
\usepackage{tikz}
\usepackage{mathtools}
\usepackage{subfig} % subfloat
\usepackage{url}


% Following works... Enable following for hyperreferencing
%\usepackage[a4paper=true,breaklinks=true]{hyperref}
%

%%%%%% The packages used:
%
% Note: The general philosophy has been to use packages where possible in order to make
% modifications as as painless as possible - in those instances where certain packages
% have not been installed, it may be time for your SysAdmin to upgrade/include the necessary
% LaTeX packages! Where applicable, manual alternatives have also been indicated. As a last
% resort, all of the packages mentioned at CTAN, eg. http://ctan.unsw.edu.au/macros/latex
%
% [times, mathptm] uses Times for document font and as much of the Times font for
%   mathematical stuff
% [fancyhdr] defines the formatting of headers and footers; see Latex Companion Ch. 4 for more
%   information; additionally there is the [fncychap] package which gives alternative
%   formatting, and [sectsty] which can be used to adjust the sectional headings
% [setspace] contains some predefined line spacings; I use onehalfspacing in this style file
% [geometry] adjusts the margins with more ease
% [chapterbib] a package which places a reference/bibliography section at the end of each
%   chapter; the sectionbib option treats the reference as a section*, ie. no numbering. If
%   an overall bibliography section is desired instead, then remove this package and use
%   \begin{thebibliography}, etc.
% [amsmath] a 'must' for typesetting mathematical equations (formerly known as amslatex); the
%   extra tags option places the equation number ('tag') aligned to the right of the last line
%   in a 'split' environment; \allowdisplaybreaks means that multi-line equations can be
%   broken across pages - this is not allowed by default in [amsmath]
% [ntheorem] redefines a few theorem environments
% [graphicx] for inclusion of eps and other picture formats
% [psfrag] allows the placement of arbitrary latex commands in eps and ps figures
%
% This setup has been tested on the following LaTeX distributions, the language of choice is
% of course LaTeX2e:
% 1. MiKTeX 1.11 (Win32)
% 2. WinEdt 8
%
%
%%%%%% Measurements for thesis layout (for A4 paper)
% These settings result in the following margins:
%   Outer (away from binding) margin - 2.1 cm
%   Inner margin (binding side) - 4.1 cm
%   Top margin - 2 cm
%   Bottom margin - 2.2 cm
%   No marginal notes


\geometry{margin=41mm}

\addtolength{\evensidemargin}{-20mm}
\addtolength{\textwidth}{20mm}

\addtolength{\topmargin}{-11mm} \addtolength{\textheight}{22mm}


%\geometry{twosideshift=0mm,top=20mm,bottom=22mm,left=41mm,right=21mm} %original
%\geometry{twosideshift=0mm,top=30mm,bottom=30mm,left=41mm,right=21mm} %modified

%%%%%% New commands to handle formatting

% sets spacing to be one-half spacing; other options is contained in the setspace.sty file

\onehalfspacing

% redefines the heading of bibliography at end of each chapter to be 'References' - this is
% necessary because report style defaults to the use of 'bibliography' which is the more
% appropriate term to use if the reference is at end of the thesis

%\renewcommand{\bibname}{References}

% this command clears page completely  (no headers or footers left) and start next page
% on odd-numbered page

\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}\cleardoublepage}}

%%%%%% settings for the fancyhdr package
%
% The following commands typesets the thesis document to be:
% 1. On the first page of each chapter, page number is centred, while chapter headings are
%   flushed left (default behaviour anyway but see [fncychap] for more ideas)
% 2. On even-numbered page, page number is on the left header, and chapter heading on right
%   header; there is no footer
% 3. On odd-numbered page, page number is on the right header, and section heading (not: not
%   the heading of subsection) on left header; there is again no footer
%
% Note: commands as listed in the Latex companion are compatible with current version of
%   [fancyhdr]; the commands used in this style file conform to the latest documented
%

% redefines the 'plain' page style using [fancyhdr] - the 'plain' style when new chapter started

\pagestyle{fancy}

\fancypagestyle{plain}{%
\renewcommand{\headrulewidth}{0pt}% no horizontal line below header on 1st page of chapter
\fancyhf{}% clear all definitions
%\fancyfoot[C]{\bfseries\thepage}}% centred page number at footer on 1st page of chapter
\fancyfoot[C]{\thepage}}
\headheight =14.5pt   % I added this to get rid of \vbox error!

% defines the header/footer on all subsequent pages
% the selectors in [...] stand for:
% E - even page
% O - odd page
% L - left field
% R - right field
% C - centre field

\renewcommand{\chaptermark}[1]{\markboth{#1}{}}% chapter info
% use the following if want header with chapter number
%\renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}% section info
% use the following if want header with no section number
%\renewcommand{\sectionmark}[1]{\markright{#1}}

\fancyfoot{}
%\fancyhead[LE,RO]{\bfseries\thepage}
%\fancyhead[RE]{\bfseries \nouppercase \leftmark}
%\fancyhead[LO]{\bfseries \nouppercase \rightmark}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\nouppercase \leftmark}
\fancyhead[LO]{\nouppercase \rightmark}

%%%%%% some options for mathematical formulae

% ----- theorem-like environments (see [ntheorem] for more information)
% 1. The default theoremstyle is 'plain', ie. theorem label followed by theorem statement
% 2. The format is \newtheorem{environment name}{label}[numbering scheme]
% 3. The following few theorem environments have bold romanstyle heading, followed (no line
% break) immediately by the theorem statement, in italic font
% Note: the properties are inherited, ie. remains the default unless modified

\theoremstyle{plain} \theoremheaderfont{\normalfont\bfseries}
%\theorembodyfont{\itshape} \theoremnumbering{arabic}
\theoremsymbol{}

\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{Proposition}{Proposition}[chapter]
\newtheorem{definition}{Definition}[chapter]
\newtheorem{Assumption}{Assumption}[chapter]
\newtheorem{lemma}{Lemma}[chapter]
\newtheorem{remark}{Remark}[chapter]
\newtheorem{Property}{Property}[chapter]
\newtheorem{Scheme}{Scheme}

% 1. The 'break' style means there is a line break after the theorem heading
% 2. The text of the body of theorem is in 'normal' roman typeface, not italics.

\theoremstyle{break} \theorembodyfont{\upshape}

\newtheorem{example}{Example}[section]
%\newtheorem{remark}{Remark}[section]
\newtheorem{note}{Note}[section]

\newcommand{\onecolumnfigurewidth}{1.00\columnwidth}% easy to scale
\newcommand{\twocolumnfigurewidth}{1.00\textwidth}
\newcommand{\onecolfigwid}{1.00\columnwidth}% easy to scale


\newcommand{\overview}[1]{{\textsl{\textbf{Overview: }}}{\textsl{#1}}}

% defines an openbox symbol for proof environment - a hack lifted from [amsthm] package
\newcommand{\openbox}{\leavevmode%
\hbox to.77778em{%
\hfil\vrule%
\vbox to.675em{\hrule width.6em\vfil\hrule}%
\vrule\hfil}}%

\theoremstyle{nonumberbreak}
\theoremsymbol{\openbox}% this gives an open box

\newtheorem{proof}{Proof}
% If there is a slight indentation before 'Proof' then use the following definition instead,
% because there is a bug in previous version of ntheorem
%\newtheorem{proof}{\hskip-\labelsep{Proof}}

%% defintion for signatures
\def\signature#1#2{\par\noindent#1\dotfill\null\\*
  {\raggedleft #2\par}}

% ----- mathematical commands, shorthands, etc
% define shorthands for some often-used environments
% Note: not advisable to use too many!

\def\beq#1\eeq{\begin{equation}#1\end{equation}}
\newcommand{\bmat}{\begin{bmatrix}}
\newcommand{\emat}{\end{bmatrix}}

% examples of more complex commands
% use of \mbox means the same command can be used in text or math mode by just \{command}

\newcommand{\by}{\ensuremath{\times}}
\newcommand{\is}{\ensuremath{\stackrel{\mathrm{def}}{=}}}

% commands that take one or two arguments

\newcommand{\absmod}[1]{\ensuremath{\left| #1 \right|}}
\newcommand{\filt}[2]{\ensuremath{\Pi_{#1|#2}}}
% new operators which will have the correct intersymbol spacing

\newcommand{\rank}{\ensuremath{\operatorname{rank}}}
\newcommand{\diag}{\ensuremath{\operatorname{diag}}}

% a hack of the 'Reals' symbol
%\def\reals{{\rm I\kern-.17em R}}
% some alternatives are
% 1. dsrom font:
%\usepackage{dsfont}\mathds{R}
% 2. bbm font:
%\usepackage{bbm}\mathbbm{R}
% 3. blackboard font:
%\usepackage{amsfonts}\mathbb{R}

%%%%%% new commands for modifying the 'look' of appendices

% adds a line in toc with no page numbers; syntax is similar to \addcontentsline
% Note: must be issued before \clearemptydoublepage command
\newcommand{\addtocentrynonumber}[2]{%
\addtocontents{toc}{\protect\contentsline{#1}{#2}{}}%
}

\newcommand{\addtocentry}[1]{%
\let\oldacl=\addcontentsline
\def\addcontentsline##1##2##3{%
    \ifthenelse{\equal{##2}{#1}}%
    {\addtocontents{##1}{\protect\contentsline{##2}{\appendixname\space ##3}{\thepage}}}%
    {\oldacl{##1}{##2}{##3}}%
    }%
}

% in the Appendices environment:
% 1. each appendix is defined as a separate chapter
% 2. the word \appendixname (default Appendix) is added to the chapter name of each appendix
% 3. there is also an associated toc entry for each chapter with \appendixname
% 4. the theorem environments are redefined so that the numbering comes out correctly
% in the appendix chapters, ie. Theorem A.1, Theorem A.2 instead of Theorem A.0.2
% note: the name of the environments have been changed to have the prefix of 'x'; the old
%   numbering scheme can still be used by using the old theorem-like names
%

\renewcommand{\appendixname}{Appendix}
\newenvironment{appendices}{%
    \setcounter{chapter}{0}%
    \renewcommand{\chaptername}{\appendixname}%
    \renewcommand{\thechapter}{\Alph{chapter}}%
    \addtocentry{chapter}%
    \theoremstyle{plain}%
    \theoremheaderfont{\normalfont\bfseries}%
    \theorembodyfont{\itshape}%
    \theoremnumbering{arabic}%
    \theoremsymbol{}%
    \newtheorem{xtheorem}{Theorem}[chapter]%
    \newtheorem{xcorollary}{Corollary}[chapter]%
    \newtheorem{xproposition}{Proposition}[chapter]%
    \newtheorem{xdefinition}{Definition}[chapter]%
    \newtheorem{xassumption}{Assumption}[chapter]%
    \newtheorem{xlemma}{Lemma}[chapter]%
    \theoremstyle{break}%
    \theorembodyfont{\upshape}%
    \newtheorem{xexample}{Example}[chapter]%
    \newtheorem{xremark}{Remark}[chapter]%
    \newtheorem{xnote}{Note}[chapter]%
} {}

% in the Chappendix environment
% 1. each appendix is defined as a separate section
% 2. the appropriate toc entry does not have the word \appendixname
%\newenvironment{chappendix}{%
%    \section*{Appendices}%
%    \setcounter{section}{0}%
%    \renewcommand{\thesection}{\Alph{section}}%
%    \renewcommand{\theequation}{\thesection.\arabic{equation}}%
%    \let\oldsectiondef=\section%
%    \def\section{%
%        \setcounter{equation}{0}%
%        \oldsectiondef%
%    }%
%} {}


\newenvironment{chappendix}{%
    \section*{Appendices}%
    \setcounter{section}{0}%
    \renewcommand{\thesection}{\thechapter.\Alph{section}}%
    \renewcommand{\theequation}{\thesection.\arabic{equation}}%
    \let\oldsectiondef=\section%
    \def\section{%
        \setcounter{equation}{0}%
        \oldsectiondef%
    }%
} {}
%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%% writings which appear on the title page, so need to change to your own!

\newcommand{\thtitle}{Thesis Title: My Little Contribution}
\newcommand{\thauthor}{Student Name}
\newcommand{\thauthorID}{19010000}
\newcommand{\thsupervisor}{Dr./Mr. Z}
%
% Stationary:
\newcommand{\thdept}{Department of Electrical Engineering}
\newcommand{\thschool}{Syed Babar Ali School of Science and Engineering}
\newcommand{\thuni}{Lahore University of Management Sciences}
\def\onedot{.,\,}


% Path for graphics, images, figure folders
\graphicspath{{figs/},{figures/}}


\begin{document}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}


\begin{titlepage}
\begin{center}
    \begin{doublespacing}
        {\bfseries\huge \thtitle \par}
    \end{doublespacing}
    \vskip 2cm
\end{center}

    \begin{center}
        \large{A Masters Thesis}\\
				\large{Presented By}\\
				\vspace{1.5cm}
			  \large{\thauthor}\\
			  \large{\thauthorID}\\
				\vspace{1.5cm}
				\large{In Partial Fulfillment of the requirements of the degree of}\\
				\large{Masters in Electrical Engineering}\\
				\vspace{1.5cm}
        \large{Supervisor: \thsupervisor}
    \vskip 10mm
     {\large Fall 2019}
				\vfill
\includegraphics[width=3cm]{lums_logo.png}\par
				\vspace{0.5cm}
    {\rmfamily\large \thdept \linebreak
    \thschool \linebreak
            \thuni}
    \end{center}
\end{titlepage}
\clearemptydoublepage


% Common to use Roman numerals for the preliminary pages and change to arabic in the main text

\pagenumbering{roman}

\include{chap0/signs} \clearemptydoublepage

\addcontentsline{toc}{chapter}{Dedication}
\include{chap0/ack} \clearemptydoublepage

\addcontentsline{toc}{chapter}{Acknowledgements}
\include{chap0/ack} \clearemptydoublepage

%\typeout{Abstract}
\addcontentsline{toc}{chapter}{Abstract}
\include{chap0/abstract} \clearemptydoublepage


% List of Acronyms
%\typeout{List of Acronyms} %
\addcontentsline{toc}{chapter}{List of Acronyms}
\include{chap0/acronyms}\clearemptydoublepage


%%Notation and Symbols
%%\typeout{Notations and Symbols}%
\addcontentsline{toc}{chapter}{Notations}
\include{chap0/notations} \clearemptydoublepage


%% table of content
\tableofcontents \clearemptydoublepage %


%List of Figures
%\typeout{List of Figures}%
\addcontentsline{toc}{chapter}{List of Figures}%
\listoffigures \clearemptydoublepage


%List of Tables
\addcontentsline{toc}{chapter}{List of Tables}%
\listoftables\clearemptydoublepage


%%%%%% main body
% include as many chapters as necessary

\pagenumbering{arabic}


\include{chap1/chapter1} \clearemptydoublepage
\include{chap2/chapter2} \clearemptydoublepage
\include{chap3/chapter3} \clearemptydoublepage
\include{chap4/chapter4} \clearemptydoublepage
\include{chap5/chapter5} \clearemptydoublepage
\include{chap6/chapter6} \clearemptydoublepage
\include{chap7/chapter7} \clearemptydoublepage

%
%

\begin{appendices}% using the 'new' appendix environment
\include{appendix/append}\clearemptydoublepage
\end{appendices}

\addcontentsline{toc}{chapter}{Bibliography}%
\bibliographystyle{IEEEbib}
\bibliography{IEEEabrv,thesis_references} \clearemptydoublepage

%
%
\end{document}


%things to do
%3. search broken links "? marks" through out the thesis
